{"ast":null,"code":"import React, { useEffect } from 'react';\nimport makeCancellable from 'make-cancellable-promise';\nimport invariant from 'tiny-invariant';\nimport warning from 'tiny-warning';\nimport StructTreeItem from './StructTreeItem';\nimport usePageContext from './shared/hooks/usePageContext';\nimport useResolver from './shared/hooks/useResolver';\nimport { cancelRunningTask } from './shared/utils';\nexport default function StructTree() {\n  const pageContext = usePageContext();\n  invariant(pageContext, 'Unable to find Page context.');\n  const {\n    onGetStructTreeError: onGetStructTreeErrorProps,\n    onGetStructTreeSuccess: onGetStructTreeSuccessProps\n  } = pageContext;\n  const [structTreeState, structTreeDispatch] = useResolver();\n  const {\n    value: structTree,\n    error: structTreeError\n  } = structTreeState;\n  const {\n    customTextRenderer,\n    page\n  } = pageContext;\n\n  function onLoadSuccess() {\n    if (!structTree) {\n      // Impossible, but TypeScript doesn't know that\n      return;\n    }\n\n    if (onGetStructTreeSuccessProps) {\n      onGetStructTreeSuccessProps(structTree);\n    }\n  }\n\n  function onLoadError() {\n    if (!structTreeError) {\n      // Impossible, but TypeScript doesn't know that\n      return;\n    }\n\n    warning(false, structTreeError.toString());\n\n    if (onGetStructTreeErrorProps) {\n      onGetStructTreeErrorProps(structTreeError);\n    }\n  }\n\n  function resetAnnotations() {\n    structTreeDispatch({\n      type: 'RESET'\n    });\n  }\n\n  useEffect(resetAnnotations, [structTreeDispatch, page]);\n\n  function loadStructTree() {\n    if (customTextRenderer) {\n      // TODO: Document why this is necessary\n      return;\n    }\n\n    if (!page) {\n      return;\n    }\n\n    const cancellable = makeCancellable(page.getStructTree());\n    const runningTask = cancellable;\n    cancellable.promise.then(nextStructTree => {\n      structTreeDispatch({\n        type: 'RESOLVE',\n        value: nextStructTree\n      });\n    }).catch(error => {\n      structTreeDispatch({\n        type: 'REJECT',\n        error\n      });\n    });\n    return () => cancelRunningTask(runningTask);\n  }\n\n  useEffect(loadStructTree, [customTextRenderer, page, structTreeDispatch]);\n  useEffect(() => {\n    if (structTree === undefined) {\n      return;\n    }\n\n    if (structTree === false) {\n      onLoadError();\n      return;\n    }\n\n    onLoadSuccess();\n  }, // Ommitted callbacks so they are not called every time they change\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [structTree]);\n\n  if (!structTree) {\n    return null;\n  }\n\n  return React.createElement(StructTreeItem, {\n    className: \"react-pdf__Page__structTree structTree\",\n    node: structTree\n  });\n}","map":{"version":3,"names":["React","useEffect","makeCancellable","invariant","warning","StructTreeItem","usePageContext","useResolver","cancelRunningTask","StructTree","pageContext","onGetStructTreeError","onGetStructTreeErrorProps","onGetStructTreeSuccess","onGetStructTreeSuccessProps","structTreeState","structTreeDispatch","value","structTree","error","structTreeError","customTextRenderer","page","onLoadSuccess","onLoadError","toString","resetAnnotations","type","loadStructTree","cancellable","getStructTree","runningTask","promise","then","nextStructTree","catch","undefined","createElement","className","node"],"sources":["/Users/mengfanwang/Desktop/mengfw.github.io/node_modules/react-pdf/dist/esm/StructTree.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport makeCancellable from 'make-cancellable-promise';\nimport invariant from 'tiny-invariant';\nimport warning from 'tiny-warning';\nimport StructTreeItem from './StructTreeItem';\nimport usePageContext from './shared/hooks/usePageContext';\nimport useResolver from './shared/hooks/useResolver';\nimport { cancelRunningTask } from './shared/utils';\nexport default function StructTree() {\n    const pageContext = usePageContext();\n    invariant(pageContext, 'Unable to find Page context.');\n    const { onGetStructTreeError: onGetStructTreeErrorProps, onGetStructTreeSuccess: onGetStructTreeSuccessProps, } = pageContext;\n    const [structTreeState, structTreeDispatch] = useResolver();\n    const { value: structTree, error: structTreeError } = structTreeState;\n    const { customTextRenderer, page } = pageContext;\n    function onLoadSuccess() {\n        if (!structTree) {\n            // Impossible, but TypeScript doesn't know that\n            return;\n        }\n        if (onGetStructTreeSuccessProps) {\n            onGetStructTreeSuccessProps(structTree);\n        }\n    }\n    function onLoadError() {\n        if (!structTreeError) {\n            // Impossible, but TypeScript doesn't know that\n            return;\n        }\n        warning(false, structTreeError.toString());\n        if (onGetStructTreeErrorProps) {\n            onGetStructTreeErrorProps(structTreeError);\n        }\n    }\n    function resetAnnotations() {\n        structTreeDispatch({ type: 'RESET' });\n    }\n    useEffect(resetAnnotations, [structTreeDispatch, page]);\n    function loadStructTree() {\n        if (customTextRenderer) {\n            // TODO: Document why this is necessary\n            return;\n        }\n        if (!page) {\n            return;\n        }\n        const cancellable = makeCancellable(page.getStructTree());\n        const runningTask = cancellable;\n        cancellable.promise\n            .then((nextStructTree) => {\n            structTreeDispatch({ type: 'RESOLVE', value: nextStructTree });\n        })\n            .catch((error) => {\n            structTreeDispatch({ type: 'REJECT', error });\n        });\n        return () => cancelRunningTask(runningTask);\n    }\n    useEffect(loadStructTree, [customTextRenderer, page, structTreeDispatch]);\n    useEffect(() => {\n        if (structTree === undefined) {\n            return;\n        }\n        if (structTree === false) {\n            onLoadError();\n            return;\n        }\n        onLoadSuccess();\n    }, \n    // Ommitted callbacks so they are not called every time they change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [structTree]);\n    if (!structTree) {\n        return null;\n    }\n    return React.createElement(StructTreeItem, { className: \"react-pdf__Page__structTree structTree\", node: structTree });\n}\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,eAAP,MAA4B,0BAA5B;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,SAASC,iBAAT,QAAkC,gBAAlC;AACA,eAAe,SAASC,UAAT,GAAsB;EACjC,MAAMC,WAAW,GAAGJ,cAAc,EAAlC;EACAH,SAAS,CAACO,WAAD,EAAc,8BAAd,CAAT;EACA,MAAM;IAAEC,oBAAoB,EAAEC,yBAAxB;IAAmDC,sBAAsB,EAAEC;EAA3E,IAA4GJ,WAAlH;EACA,MAAM,CAACK,eAAD,EAAkBC,kBAAlB,IAAwCT,WAAW,EAAzD;EACA,MAAM;IAAEU,KAAK,EAAEC,UAAT;IAAqBC,KAAK,EAAEC;EAA5B,IAAgDL,eAAtD;EACA,MAAM;IAAEM,kBAAF;IAAsBC;EAAtB,IAA+BZ,WAArC;;EACA,SAASa,aAAT,GAAyB;IACrB,IAAI,CAACL,UAAL,EAAiB;MACb;MACA;IACH;;IACD,IAAIJ,2BAAJ,EAAiC;MAC7BA,2BAA2B,CAACI,UAAD,CAA3B;IACH;EACJ;;EACD,SAASM,WAAT,GAAuB;IACnB,IAAI,CAACJ,eAAL,EAAsB;MAClB;MACA;IACH;;IACDhB,OAAO,CAAC,KAAD,EAAQgB,eAAe,CAACK,QAAhB,EAAR,CAAP;;IACA,IAAIb,yBAAJ,EAA+B;MAC3BA,yBAAyB,CAACQ,eAAD,CAAzB;IACH;EACJ;;EACD,SAASM,gBAAT,GAA4B;IACxBV,kBAAkB,CAAC;MAAEW,IAAI,EAAE;IAAR,CAAD,CAAlB;EACH;;EACD1B,SAAS,CAACyB,gBAAD,EAAmB,CAACV,kBAAD,EAAqBM,IAArB,CAAnB,CAAT;;EACA,SAASM,cAAT,GAA0B;IACtB,IAAIP,kBAAJ,EAAwB;MACpB;MACA;IACH;;IACD,IAAI,CAACC,IAAL,EAAW;MACP;IACH;;IACD,MAAMO,WAAW,GAAG3B,eAAe,CAACoB,IAAI,CAACQ,aAAL,EAAD,CAAnC;IACA,MAAMC,WAAW,GAAGF,WAApB;IACAA,WAAW,CAACG,OAAZ,CACKC,IADL,CACWC,cAAD,IAAoB;MAC1BlB,kBAAkB,CAAC;QAAEW,IAAI,EAAE,SAAR;QAAmBV,KAAK,EAAEiB;MAA1B,CAAD,CAAlB;IACH,CAHD,EAIKC,KAJL,CAIYhB,KAAD,IAAW;MAClBH,kBAAkB,CAAC;QAAEW,IAAI,EAAE,QAAR;QAAkBR;MAAlB,CAAD,CAAlB;IACH,CAND;IAOA,OAAO,MAAMX,iBAAiB,CAACuB,WAAD,CAA9B;EACH;;EACD9B,SAAS,CAAC2B,cAAD,EAAiB,CAACP,kBAAD,EAAqBC,IAArB,EAA2BN,kBAA3B,CAAjB,CAAT;EACAf,SAAS,CAAC,MAAM;IACZ,IAAIiB,UAAU,KAAKkB,SAAnB,EAA8B;MAC1B;IACH;;IACD,IAAIlB,UAAU,KAAK,KAAnB,EAA0B;MACtBM,WAAW;MACX;IACH;;IACDD,aAAa;EAChB,CATQ,EAUT;EACA;EACA,CAACL,UAAD,CAZS,CAAT;;EAaA,IAAI,CAACA,UAAL,EAAiB;IACb,OAAO,IAAP;EACH;;EACD,OAAOlB,KAAK,CAACqC,aAAN,CAAoBhC,cAApB,EAAoC;IAAEiC,SAAS,EAAE,wCAAb;IAAuDC,IAAI,EAAErB;EAA7D,CAApC,CAAP;AACH"},"metadata":{},"sourceType":"module"}