{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport { useRef } from \"react\";\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect\";\nconst isBrowser = typeof window !== `undefined`;\n\nfunction getScrollPosition(_ref) {\n  let {\n    element,\n    useWindow\n  } = _ref;\n  if (!isBrowser) return {\n    x: 0,\n    y: 0\n  };\n  const target = element ? element.current : document.body;\n  const position = target.getBoundingClientRect();\n  return useWindow ? {\n    x: window.scrollX,\n    y: window.scrollY\n  } : {\n    x: position.left,\n    y: position.top\n  };\n}\n\nexport function useScrollPosition(effect, deps, element, useWindow, wait) {\n  _s();\n\n  const position = useRef(getScrollPosition({\n    useWindow\n  }));\n  let throttleTimeout = null;\n\n  const callBack = () => {\n    const currPos = getScrollPosition({\n      element,\n      useWindow\n    });\n    effect({\n      prevPos: position.current,\n      currPos\n    });\n    position.current = currPos;\n    throttleTimeout = null;\n  };\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isBrowser) {\n      return;\n    }\n\n    const handleScroll = () => {\n      if (wait) {\n        if (throttleTimeout === null) {\n          throttleTimeout = setTimeout(callBack, wait);\n        }\n      } else {\n        callBack();\n      }\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n      throttleTimeout && clearTimeout(throttleTimeout);\n    };\n  }, deps);\n}\n\n_s(useScrollPosition, \"k3zHyQZ1uSsFBa6u3RPtD4qKZz4=\", false, function () {\n  return [useIsomorphicLayoutEffect];\n});\n\nuseScrollPosition.defaultProps = {\n  deps: [],\n  element: false,\n  useWindow: false,\n  wait: null\n};","map":{"version":3,"names":["useRef","useIsomorphicLayoutEffect","isBrowser","window","getScrollPosition","element","useWindow","x","y","target","current","document","body","position","getBoundingClientRect","scrollX","scrollY","left","top","useScrollPosition","effect","deps","wait","throttleTimeout","callBack","currPos","prevPos","handleScroll","setTimeout","addEventListener","removeEventListener","clearTimeout","defaultProps"],"sources":["/Users/mengfanwang/Desktop/mengfw.github.io/src/hooks/useScrollPosition.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { useRef } from \"react\";\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect\";\n\nconst isBrowser = typeof window !== `undefined`;\n\nfunction getScrollPosition({ element, useWindow }) {\n  if (!isBrowser) return { x: 0, y: 0 };\n\n  const target = element ? element.current : document.body;\n  const position = target.getBoundingClientRect();\n\n  return useWindow\n    ? { x: window.scrollX, y: window.scrollY }\n    : { x: position.left, y: position.top };\n}\n\nexport function useScrollPosition(effect, deps, element, useWindow, wait) {\n  const position = useRef(getScrollPosition({ useWindow }));\n\n  let throttleTimeout = null;\n\n  const callBack = () => {\n    const currPos = getScrollPosition({ element, useWindow });\n    effect({ prevPos: position.current, currPos });\n    position.current = currPos;\n    throttleTimeout = null;\n  };\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isBrowser) {\n      return;\n    }\n\n    const handleScroll = () => {\n      if (wait) {\n        if (throttleTimeout === null) {\n          throttleTimeout = setTimeout(callBack, wait);\n        }\n      } else {\n        callBack();\n      }\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n      throttleTimeout && clearTimeout(throttleTimeout);\n    };\n  }, deps);\n}\n\nuseScrollPosition.defaultProps = {\n  deps: [],\n  element: false,\n  useWindow: false,\n  wait: null,\n};\n"],"mappings":";;AAAA;AACA,SAASA,MAAT,QAAuB,OAAvB;AACA,SAASC,yBAAT,QAA0C,6BAA1C;AAEA,MAAMC,SAAS,GAAG,OAAOC,MAAP,KAAmB,WAArC;;AAEA,SAASC,iBAAT,OAAmD;EAAA,IAAxB;IAAEC,OAAF;IAAWC;EAAX,CAAwB;EACjD,IAAI,CAACJ,SAAL,EAAgB,OAAO;IAAEK,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;EAAX,CAAP;EAEhB,MAAMC,MAAM,GAAGJ,OAAO,GAAGA,OAAO,CAACK,OAAX,GAAqBC,QAAQ,CAACC,IAApD;EACA,MAAMC,QAAQ,GAAGJ,MAAM,CAACK,qBAAP,EAAjB;EAEA,OAAOR,SAAS,GACZ;IAAEC,CAAC,EAAEJ,MAAM,CAACY,OAAZ;IAAqBP,CAAC,EAAEL,MAAM,CAACa;EAA/B,CADY,GAEZ;IAAET,CAAC,EAAEM,QAAQ,CAACI,IAAd;IAAoBT,CAAC,EAAEK,QAAQ,CAACK;EAAhC,CAFJ;AAGD;;AAED,OAAO,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,IAAnC,EAAyChB,OAAzC,EAAkDC,SAAlD,EAA6DgB,IAA7D,EAAmE;EAAA;;EACxE,MAAMT,QAAQ,GAAGb,MAAM,CAACI,iBAAiB,CAAC;IAAEE;EAAF,CAAD,CAAlB,CAAvB;EAEA,IAAIiB,eAAe,GAAG,IAAtB;;EAEA,MAAMC,QAAQ,GAAG,MAAM;IACrB,MAAMC,OAAO,GAAGrB,iBAAiB,CAAC;MAAEC,OAAF;MAAWC;IAAX,CAAD,CAAjC;IACAc,MAAM,CAAC;MAAEM,OAAO,EAAEb,QAAQ,CAACH,OAApB;MAA6Be;IAA7B,CAAD,CAAN;IACAZ,QAAQ,CAACH,OAAT,GAAmBe,OAAnB;IACAF,eAAe,GAAG,IAAlB;EACD,CALD;;EAOAtB,yBAAyB,CAAC,MAAM;IAC9B,IAAI,CAACC,SAAL,EAAgB;MACd;IACD;;IAED,MAAMyB,YAAY,GAAG,MAAM;MACzB,IAAIL,IAAJ,EAAU;QACR,IAAIC,eAAe,KAAK,IAAxB,EAA8B;UAC5BA,eAAe,GAAGK,UAAU,CAACJ,QAAD,EAAWF,IAAX,CAA5B;QACD;MACF,CAJD,MAIO;QACLE,QAAQ;MACT;IACF,CARD;;IAUArB,MAAM,CAAC0B,gBAAP,CAAwB,QAAxB,EAAkCF,YAAlC;IAEA,OAAO,MAAM;MACXxB,MAAM,CAAC2B,mBAAP,CAA2B,QAA3B,EAAqCH,YAArC;MACAJ,eAAe,IAAIQ,YAAY,CAACR,eAAD,CAA/B;IACD,CAHD;EAID,CArBwB,EAqBtBF,IArBsB,CAAzB;AAsBD;;GAlCeF,iB;UAYdlB,yB;;;AAwBFkB,iBAAiB,CAACa,YAAlB,GAAiC;EAC/BX,IAAI,EAAE,EADyB;EAE/BhB,OAAO,EAAE,KAFsB;EAG/BC,SAAS,EAAE,KAHoB;EAI/BgB,IAAI,EAAE;AAJyB,CAAjC"},"metadata":{},"sourceType":"module"}